# Create SSH Key Pair
SSH keys provide a means to authenticate on to a server.  The keys (long random text strings) are held in two files.  As standard, the private key file has no file extension, whilst the public key file has the same file name but with a .pub file extension.  In some instances the private key file has a .pem or .ppk extension.  Both keys can be opened in a text editor to view and copy the keys as needed.
The private key should be kept secure on in the .ssh folder and never shared or transferred from the local device.
The public key can be shared as needed without necessarily using secure transfer protocols.
## Create a Key Pair (Private and Public Keys)

### using ssh-keygen
OpenSSH should be enabled on QM devices.  For personal devices, it may need to be added as an Added Feature (Start >> Settings >> System >> Optional Features).
#### create a Passphrase - {passphrase}
- create a passphrase 14-20 characters (A-Z, a-z, 0-9, symbols except `\"$'[];`  You may have to type this in at various prompts when using the key, so it may be best to use the random word+number method with a symbol
	- eg "HungryGecko8Salad$20"
#### decide a Key Reference + Key File Name - {key-ref} {key-file}
- decide a text identifier for key. This is useful for identifying specific keys within lists, such as loaded keys in a key agent.  It should be unique and best approached like an email address.
  I use "kelvin+2025-02@qmul-ceg", ie kelvin’s key created 2025-02 for use at qmul-ceg. 
  For a detailed discussion: [SSH Key Naming](https://gist.github.com/ChristopherA/3d6a2f39c4b623a1a287b3fb7e0aa05b#naming)
- decide a file name for the keys.  Like the Key Reference, it should identifiable within other key files.	I use "kelvin2025"
- for github, the Key Reference needs to be the same email as used for github login.
#### create a .ssh folder {ssh-dir}
If it does not already exist, create a `.ssh` folder or directory in your home folder
- `c:\Users\wew303\.ssh` (Windows)
- `~/.ssh` (Linux)
#### create Key Pair
In terminal:
- `ssh-keygen -t ed25519 -N "{passphrase}" -f fullpath/to/{ssh-dir}/{key-file} -C “{key-ref}”`
**OR use the interactive method**
- `ssh-keygen -t ed25519 -C “{key-ref}”`
	- You are prompted to accept or change the default ssh-dir and key-file - `{user home}/.ssh/id_ed25519` and `id_ed25519.pub`.
		- provide the `fullpath/to/{ssh-dir}/{key-file}`
			- NOTE: in windows the file path should be provide as `C:\Users\wew303/.ssh/kelvin2025` - note the differing \ and / 
		- OR press *enter* to accept the default and then rename the files.
	- You are prompted to provide a passphrase.
		- provide the {passphrase}
		- confirm by retyping the {passphrase}.
## Key Types
Keys can be created using different algorithms and methods
- **RSA** - (Rivest–Shamir–Adleman) default generated by ssh-keygen but old and potentially vulnerable.  if used, needs to used a bit strength of 2048 or 4096.
	- recommended `ssh-keygen -t rsa -b 2048` or `ssh-keygen -t rsa -b 4096`
- **DSA** - (Digital Signature Algorithm) = old US Govt standard and no longer considered secure.
	- Do not use
- **EcDSA** - (Elliptic curve DSA) is the new US Govt standard  with bit sizes of 256, 384, 521 bits (not 512!).
	- BUT contains a backdoor for NSA (US Govt)
	- BUT there have been errors in applications implementing ecdsa 521
	- recommend `ssh-keygen -t ecdsa -b 521`
- **EdDSA** - (Edwards curve DSA) is new and becoming more widely supported. Significantly smaller and quicker than RSA.
	- ed25519 is equivalent to RSA 3072-bit. 
	- ed448 is equivalent to RSA 4096-bit - but is not implemented in OpenSSH or OpenVPN
	- `ssh-keygen ed25519`

## Links
This video provides a good run through of the key creation process: [How To: Generate an ed25519 SSH key](https://www.youtube.com/watch?v=3PHfKFhvldc&t=79s)
https://helpdeskgeek.com/how-to/how-to-generate-ssh-keys-on-windows-mac-and-linux/
https://www.ssh.com/academy/ssh/keygen

molecule4Glutinous7Bubbly2

## using PuTTYgen
- **PuTTYgen** ~> Parameters - ECDSA + nistp 256
	- Click 'Generate' and wave mouse over blank area
	- Add passphrase - can leave blank
	- Save keys
		- File >> Save private key - {filename}.ppk
		- File >> Save public key - {filename}.pub
		- Conversions >> Export OpenSSH (new file format) - {filename} 

## Install OpenSSH
OpenSSH is available as an Added Feature in Windows but may already be installed.
- **Start >> Settings >> System >> Optional Features**
	- If OpenSSH is not listed as an Installed Feature
		- Add A Feature - tick OpenSSH client.
- Or you can check in a Command Prompt / PowerShell
	- `ssh -V` and enter
	- Check for returned version information - such as `OpenSSH_for_Windows_8.1p1, LibreSSL 3.0.2`